# モンテカルロ位置推定(MCL)の実装
1次元空間におけるロボットの自己位置推定を, MCLを用いて実装したものです.

## 実行手順
  ```
# 1. リポジトリのクローン
git clone https://github.com/Daisuke-joho/mcl_localization.git
cd mcl_localization

# 2. 実行（実行後に mcl_result.gif が生成されます）
python3 main.py
  ```
## アルゴリズムの説明

### 1. 移動更新
状態遷移モデル $p(x_t | x_{t-1}, u_t)$ に基づき、各パーティクルを移動させます.
*   制御指令: $u_t = 1.0$

### 2. 計測更新
特定の座標（30.0m）に設置された点ランドマークを観測します.
*   尤度関数: $L(x_t) = p(z_t | x_t)$ 
実際の観測値 $z$ とパーティクルから予測される観測値の誤差から,ガウス分布を用いて各パーティクルの重みを算出します.

### 3. リサンプリング
重みに基づいてパーティクルをコピーします.これにより、尤度の低いパーティクルが排除され, ロボットの真値に近い位置に分布が収束します.

## シミュレーション結果
![MCL Simulation](./mcl_result.gif)

### 各ステップの挙動
*   **初期状態**: 自身の位置が不明であるため,パーティクルを一様に分布します.
*   **移動更新**: ランドマークが観測できない間は, 移動ノイズの累積によってパーティクルの分布が拡大し続けます.
*   **計測更新と収束**: 30m地点にあるランドマークに近づき, 計測を行うと, 尤度計算とリサンプリングを通じてパーティクルが収束します.
ランドマークがセンサの範囲外に出ると徐々にパーティクルの分布が広がります.

## 環境
*   WSL (Ubuntu 20.04)
*   Python 3.8.10

## 参考文献
*  上田隆一『詳解 確率ロボティクス -Pythonによる基礎アルゴリズムの実装-』
*   [21C1072takahashishoku/mcl](https://github.com/21C1072takahashishoku/mcl)
    *   **参考にした点**: パーティクルフィルタにおける観測時の重みの計算処理方法を参考にしました.
